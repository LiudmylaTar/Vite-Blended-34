{"version":3,"file":"gallery.js","sources":["../src/js/gallery/UnsplashAPI.js","../src/js/gallery/createGalleryCard.js","../src/js/gallery/gallery.js"],"sourcesContent":["// Використовуй UnsplashAPI (https://unsplash.com/documentation) для запитів. Створи клас UnsplashAPI для інкапсуляції\n// логіки запитів в одному місті в окремому файлі.\n\nimport axios from 'axios';\n\nexport class UnsplashAPI {\n  #BASE_URL = 'https://api.unsplash.com/search/photos';\n  #API_KEY = 'gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58';\n  #query = '';\n  #params = new URLSearchParams({\n    per_page: 12,\n    orientation: 'portrait',\n    client_id: this.#API_KEY,\n  });\n\n  async getPopularPhotos(page) {\n    const url = `${this.#BASE_URL}?page=${page}&query=popular&${this.#params}`;\n    try {\n      const { data } = await axios(url);\n      return data;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  async getPhotosByQuery(page) {\n    const url = `${this.#BASE_URL}?page=${page}&query=${this.#query}&${\n      this.#params\n    }`;\n    try {\n      const { data } = await axios(url);\n      return data;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  set query(newQuery) {\n    this.#query = newQuery;\n  }\n}\n","export function createGalleryCard(images) {\n  return images\n    .map(\n      ({ alt_description, urls: { small } }) => ` <li class=\"gallery__item\">\n  <img class=\"gallery-img\" src=\"${small}\" alt=\"${alt_description}\"></li>`\n    )\n    .join('');\n}\n","// Створи додаток для пошуку зображень по ключовому слову.\n// При завантаженні сторінки має відбуватись запит за популярними зображеннями (ключове слово - popular),\n// а при введенні якогось слова в форму - пошук відбувається по цьому ключовому слову і сторінка перемальовується.\n\n// Використовуй UnsplashAPI (https://unsplash.com/documentation) для запитів. Створи клас UnsplashAPI для інкапсуляції\n// логіки запитів в одному місті в окремому файлі.\n// Створи окремо файл createGalleryCard.js, в якому буде функція, що відповідатиме за створення розмітки.\n// В головному файлі gallery.js має бути вся логіка роботи застосунку.\n\n// Підключи пагінацію, використовуючи бібліотеку tui-pagination, щоб можна було робити запит за різними сторінками.\n// Додай слухача на форму, щоб робити новий запит по ключовому слову (додавши відповідний метод класу UnsplashAPI).\n// Додай лоадер під час завантаження даних з бекенда.\n// Не забудь про відповідні перевірки і сповіщення при роботі з запитами і з формою.\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { UnsplashAPI } from './UnsplashAPI';\nimport { createGalleryCard } from './createGalleryCard';\n\nimport Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.css';\n\nconst container = document.getElementById('tui-pagination-container');\n\nconst pagination = new Pagination(container, {\n  totalItems: 0,\n  itemsPerPage: 12,\n  visiblePages: 5,\n  page: 1,\n});\n\nconst page = pagination.getCurrentPage();\n\nconst gallery = document.querySelector('.gallery');\nconst searchForm = document.querySelector('.js-search-form');\nconst loader = document.querySelector('.loader');\n\nsearchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  const inputValue = event.target.elements.query.value.trim();\n\n  if (!inputValue) {\n    iziToast.warning({\n      message: 'fill the field',\n    });\n    return;\n  }\n\n  api.query = inputValue;\n\n  pagination.off('afterMove', getPopularByPages);\n  pagination.off('afterMove', getByQveryByPages);\n\n  showElement(loader);\n  try {\n    const data = await api.getPhotosByQuery(page);\n\n    if (data.results.length === 0) {\n      iziToast.error({\n        message: 'images not found!',\n      });\n      return;\n    }\n    iziToast.success({\n      message: `We found ${data.total} images`,\n    });\n\n    if (data.total <= 12) {\n      hidElement(container);\n    } else {\n      showElement(container);\n    }\n    gallery.innerHTML = createGalleryCard(data.results);\n    pagination.reset(data.total);\n\n    pagination.on('afterMove', getByQveryByPages);\n  } catch (error) {\n    iziToast.error({\n      message: 'Something went wrong.',\n    });\n\n    console.log(error);\n  } finally {\n    hidElement(loader);\n  }\n});\n\nconst api = new UnsplashAPI();\napi.getPopularPhotos(page).then(data => {\n  gallery.innerHTML = createGalleryCard(data.results);\n  pagination.reset(data.total);\n});\n\npagination.on('afterMove', getPopularByPages);\n\nfunction getPopularByPages(event) {\n  const currentPage = event.page;\n  api\n    .getPopularPhotos(currentPage)\n    .then(data => (gallery.innerHTML = createGalleryCard(data.results)));\n}\nfunction getByQveryByPages(event) {\n  const currentPage = event.page;\n  api\n    .getPhotosByQuery(currentPage)\n    .then(data => (gallery.innerHTML = createGalleryCard(data.results)));\n}\n\nfunction showElement(element) {\n  element.classList.remove('hidden');\n}\nfunction hidElement(element) {\n  element.classList.add('hidden');\n}\n"],"names":["UnsplashAPI","__privateAdd","_BASE_URL","_API_KEY","_query","_params","__privateGet","page","url","data","axios","error","newQuery","__privateSet","createGalleryCard","images","alt_description","small","container","pagination","Pagination","gallery","searchForm","loader","event","inputValue","iziToast","api","getPopularByPages","getByQveryByPages","showElement","hidElement","currentPage","element"],"mappings":"ybAKO,MAAMA,CAAY,CAAlB,cACLC,EAAA,KAAAC,EAAY,0CACZD,EAAA,KAAAE,EAAW,+CACXF,EAAA,KAAAG,EAAS,IACTH,EAAA,KAAAI,EAAU,IAAI,gBAAgB,CAC5B,SAAU,GACV,YAAa,WACb,UAAWC,EAAA,KAAKH,EACpB,CAAG,GAED,MAAM,iBAAiBI,EAAM,CAC3B,MAAMC,EAAM,GAAGF,EAAA,KAAKJ,EAAS,SAASK,CAAI,kBAAkBD,EAAA,KAAKD,EAAO,GACxE,GAAI,CACF,KAAM,CAAE,KAAAI,CAAM,EAAG,MAAMC,EAAMF,CAAG,EAChC,OAAOC,CACR,OAAQE,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACF,CAED,MAAM,iBAAiBJ,EAAM,CAC3B,MAAMC,EAAM,GAAGF,EAAA,KAAKJ,EAAS,SAASK,CAAI,UAAUD,EAAA,KAAKF,EAAM,IAC7DE,EAAA,KAAKD,EACX,GACI,GAAI,CACF,KAAM,CAAE,KAAAI,CAAM,EAAG,MAAMC,EAAMF,CAAG,EAChC,OAAOC,CACR,OAAQE,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACF,CAED,IAAI,MAAMC,EAAU,CAClBC,EAAA,KAAKT,EAASQ,EACf,CACH,CAlCEV,EAAA,YACAC,EAAA,YACAC,EAAA,YACAC,EAAA,YCTK,SAASS,EAAkBC,EAAQ,CACxC,OAAOA,EACJ,IACC,CAAC,CAAE,gBAAAC,EAAiB,KAAM,CAAE,MAAAC,CAAK,CAAI,IAAK;AAAA,kCACdA,CAAK,UAAUD,CAAe,SAC3D,EACA,KAAK,EAAE,CACZ,CCeA,MAAME,EAAY,SAAS,eAAe,0BAA0B,EAE9DC,EAAa,IAAIC,EAAWF,EAAW,CAC3C,WAAY,EACZ,aAAc,GACd,aAAc,EACd,KAAM,CACR,CAAC,EAEKX,EAAOY,EAAW,iBAElBE,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAa,SAAS,cAAc,iBAAiB,EACrDC,EAAS,SAAS,cAAc,SAAS,EAE/CD,EAAW,iBAAiB,SAAU,MAAME,GAAS,CACnDA,EAAM,eAAc,EAEpB,MAAMC,EAAaD,EAAM,OAAO,SAAS,MAAM,MAAM,OAErD,GAAI,CAACC,EAAY,CACfC,EAAS,QAAQ,CACf,QAAS,gBACf,CAAK,EACD,MACD,CAEDC,EAAI,MAAQF,EAEZN,EAAW,IAAI,YAAaS,CAAiB,EAC7CT,EAAW,IAAI,YAAaU,CAAiB,EAE7CC,EAAYP,CAAM,EAClB,GAAI,CACF,MAAMd,EAAO,MAAMkB,EAAI,iBAAiBpB,CAAI,EAE5C,GAAIE,EAAK,QAAQ,SAAW,EAAG,CAC7BiB,EAAS,MAAM,CACb,QAAS,mBACjB,CAAO,EACD,MACD,CACDA,EAAS,QAAQ,CACf,QAAS,YAAYjB,EAAK,KAAK,SACrC,CAAK,EAEGA,EAAK,OAAS,GAChBsB,EAAWb,CAAS,EAEpBY,EAAYZ,CAAS,EAEvBG,EAAQ,UAAYP,EAAkBL,EAAK,OAAO,EAClDU,EAAW,MAAMV,EAAK,KAAK,EAE3BU,EAAW,GAAG,YAAaU,CAAiB,CAC7C,OAAQlB,EAAO,CACde,EAAS,MAAM,CACb,QAAS,uBACf,CAAK,EAED,QAAQ,IAAIf,CAAK,CACrB,QAAY,CACRoB,EAAWR,CAAM,CAClB,CACH,CAAC,EAED,MAAMI,EAAM,IAAI3B,EAChB2B,EAAI,iBAAiBpB,CAAI,EAAE,KAAKE,GAAQ,CACtCY,EAAQ,UAAYP,EAAkBL,EAAK,OAAO,EAClDU,EAAW,MAAMV,EAAK,KAAK,CAC7B,CAAC,EAEDU,EAAW,GAAG,YAAaS,CAAiB,EAE5C,SAASA,EAAkBJ,EAAO,CAChC,MAAMQ,EAAcR,EAAM,KAC1BG,EACG,iBAAiBK,CAAW,EAC5B,KAAKvB,GAASY,EAAQ,UAAYP,EAAkBL,EAAK,OAAO,CAAE,CACvE,CACA,SAASoB,EAAkBL,EAAO,CAChC,MAAMQ,EAAcR,EAAM,KAC1BG,EACG,iBAAiBK,CAAW,EAC5B,KAAKvB,GAASY,EAAQ,UAAYP,EAAkBL,EAAK,OAAO,CAAE,CACvE,CAEA,SAASqB,EAAYG,EAAS,CAC5BA,EAAQ,UAAU,OAAO,QAAQ,CACnC,CACA,SAASF,EAAWE,EAAS,CAC3BA,EAAQ,UAAU,IAAI,QAAQ,CAChC"}