var P=e=>{throw TypeError(e)};var f=(e,r,t)=>r.has(e)||P("Cannot "+t);var a=(e,r,t)=>(f(e,r,"read from private field"),t?t.call(e):r.get(e)),n=(e,r,t)=>r.has(e)?P("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,t),d=(e,r,t,s)=>(f(e,r,"write to private field"),s?s.call(e,t):r.set(e,t),t);import"./assets/styles-QSora9ny.js";import{a as v,P as S,i as g}from"./assets/vendor-OvO9u9K3.js";var l,h,c,u;class E{constructor(){n(this,l,"https://api.unsplash.com/search/photos");n(this,h,"gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58");n(this,c,"");n(this,u,new URLSearchParams({per_page:12,orientation:"portrait",client_id:a(this,h)}))}async getPopularPhotos(r){const t=`${a(this,l)}?page=${r}&query=popular&${a(this,u)}`;try{const{data:s}=await v(t);return s}catch(s){console.log(s)}}async getPhotosByQuery(r){const t=`${a(this,l)}?page=${r}&query=${a(this,c)}&${a(this,u)}`;try{const{data:s}=await v(t);return s}catch(s){console.log(s)}}set query(r){d(this,c,r)}}l=new WeakMap,h=new WeakMap,c=new WeakMap,u=new WeakMap;function m(e){return e.map(({alt_description:r,urls:{small:t}})=>` <li class="gallery__item">
  <img class="gallery-img" src="${t}" alt="${r}"></li>`).join("")}const p=document.getElementById("tui-pagination-container"),o=new S(p,{totalItems:0,itemsPerPage:12,visiblePages:5,page:1}),B=o.getCurrentPage(),y=document.querySelector(".gallery"),_=document.querySelector(".js-search-form"),w=document.querySelector(".loader");_.addEventListener("submit",async e=>{e.preventDefault();const r=e.target.elements.query.value.trim();if(!r){g.warning({message:"fill the field"});return}i.query=r,o.off("afterMove",M),o.off("afterMove",L),$(w);try{const t=await i.getPhotosByQuery(B);if(t.results.length===0){g.error({message:"images not found!"});return}g.success({message:`We found ${t.total} images`}),t.total<=12?q(p):$(p),y.innerHTML=m(t.results),o.reset(t.total),o.on("afterMove",L)}catch(t){g.error({message:"Something went wrong."}),console.log(t)}finally{q(w)}});const i=new E;i.getPopularPhotos(B).then(e=>{y.innerHTML=m(e.results),o.reset(e.total)});o.on("afterMove",M);function M(e){const r=e.page;i.getPopularPhotos(r).then(t=>y.innerHTML=m(t.results))}function L(e){const r=e.page;i.getPhotosByQuery(r).then(t=>y.innerHTML=m(t.results))}function $(e){e.classList.remove("hidden")}function q(e){e.classList.add("hidden")}
//# sourceMappingURL=gallery.js.map
